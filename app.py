from flask import Flask, request, jsonify, session\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_bcrypt import Bcrypt\nfrom flask_login import LoginManager\n\napp = Flask(__name__)\napp.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///site.db'\napp.secret_key = 'your_secret_key'\ndb = SQLAlchemy(app)\nbcrypt = Bcrypt(app)\nlogin_manager = LoginManager(app)\n\nclass User(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    username = db.Column(db.String(150), unique=True, nullable=False)\n    password = db.Column(db.String(150), nullable=False)\n\n@login_manager.user_loader\ndef load_user(user_id):\n    return User.query.get(int(user_id))\n\n@app.route('/register', methods=['POST'])\ndef register():\n    data = request.get_json()\n    hashed_password = bcrypt.generate_password_hash(data['password']).decode('utf-8')\n    new_user = User(username=data['username'], password=hashed_password)\n    db.session.add(new_user)\n    db.session.commit()\n    return jsonify({'message': 'User registered successfully!'}), 201\n\n@app.route('/login', methods=['POST'])\ndef login():\n    data = request.get_json()\n    user = User.query.filter_by(username=data['username']).first()\n    if user and bcrypt.check_password_hash(user.password, data['password']):\n        session['user_id'] = user.id\n        return jsonify({'message': 'Login successful!'}), 200\n    return jsonify({'message': 'Login failed!'}), 401\n\n@app.errorhandler(404)\ndef not_found(e):\n    return jsonify({'error': 'Resource not found!'}), 404\n\nif __name__ == '__main__':\n    db.create_all()\n    app.run(debug=True)